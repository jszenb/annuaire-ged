<!-- entrees.component.html -->
<div *ngIf="error" class="alert alert-danger">{{error}}</div>
<div *ngIf="success" class="alert alert-success">{{success}}</div>


<div id="theList">
	<h2>Liste des contacts en laboratoire</h2>
	<div class="row col-12">
		<div class="col-6">
			<ul class="entrees">
				<li *ngFor="let entree of entrees" 
					(click)="onSelect(entree)"
					[class.selected]="entree === selectedEntree">
					{{entree.nom}}, {{entree.prenom}}
				</li>
			</ul>
		</div>
		<div class="col-6" >
			<app-entree-detail [entree]="selectedEntree"></app-entree-detail>
		</div>
	</div>
</div>
  
<!--
    <div *ngFor="let item of entrees ;let i = index;" class="row">
      <div class="col-4">
        <input type="text"
               [(ngModel)]="entrees[i].nom"
               class="form-control"
               required
               pattern="^[A-Za-zÀ-ÖØ-öø-ÿ- ]+$"
               #nom="ngModel"
               [ngClass]="{ 'is-invalid': nom.touched && nom.invalid }">
      </div>
      <div class="col-4">
        <input type="text"
               [(ngModel)]="entrees[i].prenom"
               class="form-control"
               required
               pattern="^[A-Za-zÀ-ÖØ-öø-ÿ- ]+$"
               #prenom="ngModel"
               [ngClass]="{ 'is-invalid': prenom.touched && prenom.invalid }">
      </div>
      <div class="col-4">
        <input type="button"
               value="Mettre à jour"
               class="btn btn-success btn-sm"
               [disabled]="nom.invalid || prenom.invalid"
               (click)="updateEntree(nom, prenom, item.id)">

      <input type="button"
               value="Delete"
               class="btn btn-danger btn-sm"
               (click)="deleteEntree(item.id)">
      </div>
    </div>
-->

<br>
<div id="theForm">
  <h2>Ajout d'une nouvelle entrée</h2>
  <form #f="ngForm" name="theForm" (submit)="addEntree(f)">
    <div class="form-group col-6">
      <label>Nom</label>
      <input type="text"
            class="form-control"
            name="nom"
            #entreeNom="ngModel"
            [(ngModel)]="entree.nom"
            required
            placeholder="Saisissez ici le nom"
            pattern="^[A-Za-zÀ-ÖØ-öø-ÿ- ]+$">
      <span class="help-block danger" *ngIf="entreeNom.errors?.required && entreeNom.touched">
        Le nom est obligatoire.
      </span>
      <span class="help-block danger" *ngIf="entreeNom.errors?.pattern && entreeNom.touched">
        Le nom ne peut contenir que des caractères alphabétiques (le tiret et l'espace sont acceptés).
      </span>
    </div>

    <div class="form-group col-6">
      <label>Prénom</label>
      <input type="text"
            class="form-control"
            name="prenom"
            required
            placeholder="Saisissez ici le prénom"
            #entreePrenom="ngModel"
            [(ngModel)]="entree.prenom"
            pattern="^[A-Za-zÀ-ÖØ-öø-ÿ- ]+$">
      <span class="help-block danger" *ngIf="entreePrenom.errors?.required && entreePrenom.touched">
        Le prénom est obligatoire.
      </span>
      <span class="help-block danger" *ngIf="entreePrenom.errors?.pattern && entreePrenom.touched">
        Le prénom ne peut contenir que des caractères alphabétiques (le tiret et l'espace sont acceptés).
      </span>
    </div>

    <button
        class="btn btn-primary btn-sm"
        [disabled]="f.invalid">Add</button>
  </form>
</div>
